<%= javascript_tag do %>
  var active_menu_id = "account";
<% end %>
<div class="page-header">
  <h2>アカウント情報の編集</h2>
</div>

<%= form_for(resource, :as => resource_name,
  :url => registration_path(resource_name),
  :html => { :class => 'form-horizontal', :method => :put }) do |f| %>
  <%= devise_error_messages! %>

  <div class="control-group <%= 'error' unless resource.errors[:email].blank? %>">
    <%= f.label 'メールアドレス', class: 'control-label' %>
    <div class="controls">
      <%= f.email_field :email, :autofocus => true, class: 'text_field' %>
    </div>
  </div>

  <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
    <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
  <% end %>

  <div class="control-group <%= 'error' unless resource.errors[:current_password].blank? %>">
    <%= f.label '現在のパスワード', class: 'control-label' %>
    <div class="controls">
      <%= f.password_field :current_password, class: 'text_field' %>
    </div>
  </div>


  <div class="control-group <%= 'error' unless resource.errors[:password].blank? %>">
    <%= f.label '新しいパスワード(変更する場合)', class: 'control-label' %>
    <div class="controls">
      <%= f.password_field :password, class: 'text_field' %>
    </div>
  </div>

  <div class="control-group <%= 'error' unless resource.errors[:password_confirmation].blank? %>">
    <%= f.label 'パスワードの確認', class: 'control-label' %>
    <div class="controls">
      <%= f.password_field :password_confirmation, class: 'text_field' %>
    </div>
  </div>


  <div class="form-actions">
    <%= f.submit "変更", class: 'btn btn-primary' %>
  </div>

<% end %>

<hr>

<div class="page-header">
  <h3>アカウントの削除</h3>
</div>
<p>
アカウントを削除する場合は下のボタンをクリックしてください。
（登録したサーバ情報等はすべて抹消されます。）
</p>
<div class="form-actions">
  <%= link_to icon_tag('icon-white icon-trash') + "削除する",
    registration_path(resource_name),
    class: 'btn btn-danger',
    :data => { :confirm => "本当によろしいですか？" },
    :method => :delete %>
</div>

